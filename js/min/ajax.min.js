$(function(){function e(){o(),$.ajax({type:"GET",url:"json/images.json",dataType:"json",success:function(e){$(".error").length&&$(".error").remove();var o=e[0].thumbnail;r=o.length,a=l.children().length,s=a+d,n(o)},error:function(){t(),i()},complete:function(){i()}})}function n(e){for(var n=a;n<s;n++){var o=$("<div class='image-list__content'><a href='#' class='image-link'></a></div>"),i=e[n],t=o.find(".image-link");t.css({"background-image":"url("+i+")"}),l.append(o),o.css("opacity","0").velocity({opacity:"1"},{durtion:500,easing:"ease-in"}),a=l.children().length,a==r&&$(".more__button").css("display","none")}}function o(){c=!0,$(".more > div").addClass("more__button_loading"),$(".more__text").text("Loading...")}function i(){c=!1,$(".more > div").removeClass("more__button_loading"),$(".more__text").text("More")}function t(){if(!$(".error").length){var e=$("<div class='error'><p class='error__message'>画像を取得できませんでした</p></div>");$(".image-list").append(e)}}var r,a,s,c,l=$(".image-list"),d=12;e(),$(".more__button").click(function(){return!c&&void e()})});