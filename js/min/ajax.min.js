$(function(){function e(){i(),$.ajax({type:"GET",url:"json/images.json",dataType:"json",success:function(e){$(".error").length&&$(".error").remove();var i=e[0].thumbnail;r=i.length,a=l.children().length,s=a+m,n(i)},error:function(){o(),t()},complete:function(){t()}})}function n(e){for(var n=a;n<s;n++){var i=$("<div class='image-list__content'><a href='#' class='image-link'><img src='' alt='' class='image-link__img'></a></div>"),t=e[n],o=i.find(".image-link__img");o.attr("src",t),o.ajustImage({imagePath:t}),l.append(i),i.css("opacity","0").velocity({opacity:"1"},{durtion:500,easing:"ease-in"}),a=l.children().length,a==r&&$(".more__button").css("display","none")}}function i(){c=!0,$(".more > div").addClass("more__button_loading"),$(".more__text").text("Loading...")}function t(){c=!1,$(".more > div").removeClass("more__button_loading"),$(".more__text").text("More")}function o(){if(!$(".error").length){var e=$("<div class='error'><p class='error__message'>画像を取得できませんでした</p></div>");$(".image-list").append(e)}}var r,a,s,c,l=$(".image-list"),m=12;e(),$(".more__button").click(function(){return!c&&void e()})});